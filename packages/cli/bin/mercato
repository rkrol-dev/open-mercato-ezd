#!/usr/bin/env node

// Stub loader for the mercato CLI
// Requires packages to be built first - loads from dist/bin.js

import { existsSync } from 'node:fs';
import { join, dirname } from 'node:path';
import { fileURLToPath, pathToFileURL } from 'node:url';

const __dirname = dirname(fileURLToPath(import.meta.url));
const distBin = join(__dirname, '..', 'dist', 'bin.js');

if (!existsSync(distBin)) {
  console.error('Error: CLI not built. Run "yarn build:packages" first.');
  console.error(`Expected: ${distBin}`);
  process.exit(1);
}

// On Windows, absolute paths must be file:// URLs for ESM imports
await import(pathToFileURL(distBin).href);
